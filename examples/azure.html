<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azure | Developer notes</title>

    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <div class="p-2 h-screen">
        <div class="flex gap-4 h-full bg-gradient-to-b from-gray-50 to-gray-200">
            <div class="w-full w-1/3 lg:w-1/4 p-4 h-full bg-gray-100">
                <div class="flex flex-col">
                    <a href="https://nssivanitesh.github.io/" class="text-md p-4 hover:bg-gray-200 rounded-lg">
                        <div class="flex gap-4">
                            <ion-icon name="arrow-back-outline" class="text-lg"></ion-icon>
                            <div>Back</div>
                        </div>
                    </a>
                    <p class="text-2xl text-center p-2 rounded-lg">Azure - Notes</p>
                    <a href="#one" class="text-md p-4 hover:bg-gray-200 rounded-lg">
                        <div class="flex gap-4">
                            <ion-icon name="information-circle-outline" class="text-lg"></ion-icon>
                            <div>Why Azure and Cloud computing?</div>
                        </div>
                    </a>
                    <a href="#two" class="text-md p-4 hover:bg-gray-200 rounded-lg">
                        <div class="flex gap-4">
                            <ion-icon name="information-circle-outline" class="text-lg"></ion-icon>
                            <div>Azure - Resource groups</div>
                        </div>
                    </a>
                    <a href="#three" class="text-md p-4 hover:bg-gray-200 rounded-lg">
                        <div class="flex gap-4">
                            <ion-icon name="information-circle-outline" class="text-lg"></ion-icon>
                            <div>Azure - Compute</div>
                        </div>
                    </a>
                </div>
            </div>
            <div class="w-full w-2/3 lg:w-3/4 p-4 h-full overflow-y-scroll">
                <div class="p-4">
                    <h3 id="one" class="font-bold text-xl p-2 sticky top-0 bg-gray-100 rounded-lg">
                        <div class="flex gap-4">
                            <ion-icon name="information-circle-outline" class="text-lg"></ion-icon>
                            <div>Why Azure and Cloud computing?</div>
                        </div>
                    </h3>
                    <hr />
                    <p class="p-4 m-4 rounded-lg bg-gray-200">Client - Server model</p>
                    <div class="flex">
                        <div>
                            <b>Cloud computing is, Compute, Networking, Storage and other services - managed by someone
                                else. That can be rented. And returned.</b>
                            <ol>
                                <li>1. You buy the hardware</li>
                                <li>2. You buy the softwares</li>
                                <li>3. You employ an IT team to manage the hardwares</li>
                                <li>4. All this costs money. And the money, is not OPEX but CAPEX.</li>
                                <li>5. And, of course, as the software and hardware age - they need to be replaced.</li>
                            </ol>
                        </div>
                    </div>
                    <br />
                    <p class="p-4 m-4 rounded-lg bg-gray-200">Cloud computing</p>
                    <div class="flex">
                        <div>
                            <b>Cloud computing is, Compute, Networking, Storage and other services - managed by someone
                                else. That can be rented. And returned.</b>
                            <ol>
                                <li>1. You rent the hardware</li>
                                <li>2. You buy the softwares</li>
                                <li>3. You employ <b>few specialists</b> to manage the infrastructure.</li>
                                <li>4. All this costs money. And the money, is OPEX and not CAPEX. You pay only for what
                                    you use.</li>
                                <li>5. And, of course, as the software and hardware age. But this time, the software can
                                    be upgraded. And, the harware rental can be swapped for newer ones.</li>
                            </ol>
                            <br />

                            <b>Characteristics:</b>
                            <ol>
                                <li>1. On-demand self service
                                    <p>No human interaction is needed for resource provisioning. Available 24/7.</p>
                                </li>
                                <li>2. Broad Network Access
                                    <p>Create a network in one part of the world and access it from another. Access is
                                        not physical.</p>
                                </li>
                                <li>3. Resource pooling
                                    <p>Resource is being shared across, multiple customers. But, can be limited.</p>
                                </li>
                                <li>4. Rapid Elasticity
                                    <p>Can be scaled up and down as needed. Within minutes.</p>
                                </li>
                                <li>5. Measured Service
                                    <p>Payment made for resource used. No additional costs. Measurement: Server time or
                                        DB Time or Function calls / unit time.</p>
                                </li>
                            </ol>
                        </div>
                    </div>
                    <br />
                    <p class="p-4 m-4 rounded-lg bg-gray-200">IAAS - PAAS - SAAS</p>
                    <div class="flex">
                        <div>
                            <ol>
                                <li>1. IAAS - Infrastructure As A Service</li>
                                <li>2. PAAS - Platform As A Service</li>
                                <li>3. SAAS - Software As A Service</li>
                            </ol>
                            <ol>
                                <li>1. FAAS - Functions As A Service</li>
                                <li>2. DbAAS - Database As A Service</li>
                                <li>3. DAAS - Desktop As A Service</li>
                                <li>4. IOTAAS - IOT As A Service</li>
                                <li>5. AIAAS - AI As A Service</li>
                            </ol>
                            <img src="https://miro.medium.com/max/2000/1*bl4PsuSnNz7xHpri5uqaow.jpeg">
                        </div>
                    </div>
                    <br />
                    <p class="p-4 m-4 rounded-lg bg-gray-200">Cloud types</p>
                    <div class="flex">
                        <div>
                            <ol>
                                <li>1. Public cloud</li>
                                <li>2. Hybrid cloud</li>
                                <li>3. Private cloud</li>
                            </ol>
                        </div>
                    </div>
                    <br />
                    <p class="p-4 m-4 rounded-lg bg-gray-200">Regions & Availability Zones</p>
                    <div class="flex">
                        <div>
                            <p>Regions: Each data centers location is called a region. There are ~60 regions.</p>
                            <table class="table-auto">
                                <thead>
                                    <tr>
                                        <th>Americas</th>
                                        <th>Europe</th>
                                        <th>Africa</th>
                                        <th>Asia Pacific</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Brazil South</td>
                                        <td>France Central</td>
                                        <td>South Africa North</td>
                                        <td>Australia East</td>
                                    </tr>
                                    <tr>
                                        <td>Canada Central</td>
                                        <td>Germany West Central</td>
                                        <td aria-label="No value"></td>
                                        <td>Central India</td>
                                    </tr>
                                    <tr>
                                        <td>Central US</td>
                                        <td>North Europe</td>
                                        <td aria-label="No value"></td>
                                        <td>Japan East</td>
                                    </tr>
                                    <tr>
                                        <td>East US</td>
                                        <td>Norway East</td>
                                        <td aria-label="No value"></td>
                                        <td>Korea Central</td>
                                    </tr>
                                    <tr>
                                        <td>East US 2</td>
                                        <td>UK South</td>
                                        <td aria-label="No value"></td>
                                        <td>Southeast Asia</td>
                                    </tr>
                                    <tr>
                                        <td>South Central US</td>
                                        <td>West Europe</td>
                                        <td aria-label="No value"></td>
                                        <td>East Asia</td>
                                    </tr>
                                    <tr>
                                        <td>US Gov Virginia</td>
                                        <td>Sweden Central</td>
                                        <td aria-label="No value"></td>
                                        <td aria-label="No value"></td>
                                    </tr>
                                    <tr>
                                        <td>West US 2</td>
                                        <td aria-label="No value"></td>
                                        <td aria-label="No value"></td>
                                        <td aria-label="No value"></td>
                                    </tr>
                                    <tr>
                                        <td>West US 3</td>
                                        <td aria-label="No value"></td>
                                        <td aria-label="No value"></td>
                                        <td aria-label="No value"></td>
                                    </tr>
                                </tbody>
                            </table>
                            <p>Availability zones: A datacenter is called a zone. When there are more than one data
                                center
                                in a region, its called an Availability zone.</p>
                        </div>
                    </div>
                    <br />
                    <p class="p-4 m-4 rounded-lg bg-gray-200">Subscription vs Accounts</p>
                    <div class="flex">
                        <div>
                            <p>Subscription: Everything you subscribe inside the Azure portal.</p>
                            <p>Account: Your Azure account (identity) using which you can access your subscriptions..
                            </p>
                        </div>
                    </div>
                    <br />
                </div>

                <div class="p-4">
                    <h3 id="two" class="font-bold text-xl p-2 sticky top-0 bg-gray-100 rounded-lg">
                        <div class="flex gap-4">
                            <ion-icon name="information-circle-outline" class="text-lg"></ion-icon>
                            <div>Azure - Resource groups</div>
                        </div>
                    </h3>
                    <hr />
                    <p class="p-4 m-4 rounded-lg bg-gray-200">Resource groups</p>
                    <div class="flex">
                        <div>
                            <ul>
                                <li>1. Menu -> Resource groups -> Create</li>
                                <li>2. Choose a Subscription</li>
                                <li>3. Enter a resource group name</li>
                                <li>4. Sepcify a region.</li>
                                <li>5. Review & Create -> Create</li>
                            </ul>
                            <p>
                                Doing the same with a command line: <b>az group create -l westus -n CLITest-rg</b>
                            </p>
                            <p>
                                Doing the same with a PowerShell: <b>New-AzResourceGroup -Name PSTest-rg Location
                                    westus</b>
                            </p>
                            <p>
                                Heirarchy of ownership:</b>
                            </p>
                            <ul>
                                <li>1. Management groups</li>
                                <li>2. Subscriptions</li>
                                <li>3. Resource groups</li>
                                <li>4. Resources.</li>
                            </ul>
                            <p>
                                Storage accounts: Costs are extemely cheap.
                            </p>
                            <p>
                                SLA: Costs are extemely cheap. Different SLA's offer 99.9, 99.99, 99.99% uptimes. Free
                                and shared resources don't have SLA's.
                            </p>
                            <p>
                                Pricing models:</b>
                            </p>
                            <ul>
                                <li>1. Per resource</li>
                                <li>2. Per consumption</li>
                                <li>3. Reservations</li>
                                <li>4. Resources.</li>
                            </ul>
                        </div>
                    </div>
                    <br />
                </div>

                <div class="p-4">
                    <h3 id="three" class="font-bold text-xl p-2 sticky top-0 bg-gray-100 rounded-lg">
                        <div class="flex gap-4">
                            <ion-icon name="information-circle-outline" class="text-lg"></ion-icon>
                            <div>Azure - Compute</div>
                        </div>
                    </h3>
                    <hr />
                    <p class="p-4 m-4 rounded-lg bg-gray-200">Compute</p>
                    <div class="flex">
                        <div>
                            <ul>
                                <li>1. Set of services for hosting and running applications</li>
                                <li>2. Allows uploading code and executing it</li>
                                <li>3. Offers various levels of control and flexibility.</li>
                                <li></li>
                            </ul>
                            <p class="p-4 m-4 rounded-lg bg-gray-200">Azure - Virtual machines</p>
                            <ul>
                                <li>A virtual machine is a software, which runs on an OS like any other software. But
                                    this is capable of emulating an OS.</li>
                                <li>Allows creating new servers quicly</li>
                                <li>A single machine can host multiple Virtual machines.</li>
                                <li>A user using a virtual machine, will not realise if they are using a VPC or a real
                                    PC.</li>
                                <li>VM Density, refers to - Number of Virtual machines running on a Host machie.</li>
                                <li>This is an <b>Unmanaged service</b></li>
                            </ul>
                            <br />
                            <p><b>Steps to create a virtual machine:</b></p>
                            <ul>
                                <li>1. Select the Subscription, Resource group and region</li>
                                <li>2. Select the image (OS + other SW)</li>
                                <li>3. Select the size</li>
                                <li>4. Create the admin user for the VPC</li>
                                <li>5. Expose any ports needed</li>
                                <li>6. Check the pricing and create.</li>
                                <li>On creating a Virtual machine, all it's dependant resources will be created. Virtual
                                    machine, Network interfaces, Network Security groups, Public IP addresses, and
                                    Virtual netowrks...</li>
                                <li>Then you can connect to the Virtual machine via, RDP (Windows), SSH (Linux), or
                                    Bastion.</li>
                                <br />
                                <li><b>Automation:</b> For automation of creating similar machines, use "Download a
                                    template for Automation" link to download the JSON file of the current
                                    configuration. It's called ARM (Azure Resource Manager) template. The template can
                                    be created from scratch,
                                    be exported, modified, uploaded or deployed. This can be source controlled.</li>
                                <li>These are parameters.json and template.json. Template.json file defines the
                                    resources, and parameters provides, the configuration values.</li>
                                <li><b>Create via SSH: az deployment group create --resource-group name-of-the-rg
                                        --template-file template.json --parameters parameters.json</b></li>
                            </ul>
                            <br />
                            <p><b>Steps to delete a virtual machine:</b></p>
                            <p>Remember: A virtual machine when created, also creates many dependant resouces. So, to
                                remove a Virtual machine, remove the resource group it is part of.</p>
                            <ol>
                                <li>1. Go to resource group page, and select "Delete resource group"</li>
                            </ol>
                            <br />
                            <p><b>Cost of a virtual machine:</b></p>
                            <ol>
                                <li>1. Virtual machine type</li>
                                <li>2. Disk allocation, and usage</li>
                                <li>3. IP address</li>
                                <li>4. Storage accounts cost</li>
                            </ol>
                            <br />
                            <p><b>How to reduce the cost of a virtual machine:</b></p>
                            <ol>
                                <li><b>1. Auto shutdown (Available while creating the machine):</b> Automatically
                                    shutdown
                                    machines when not needed (for Test and development machine)</li>
                                <li><b>2. Reserved instances:</b> Machines rented for 1-3 years and run continously
                                    (for
                                    production servers). Has great discounts and payments can be made monthly. Cannot be
                                    stopped / refunded.</li>
                                <li><b>3. Spot instances:</b> Machines that run on unused capacity from Azure. Can
                                    be evicted
                                    on any momemnt. Offers upto 90% discount. Good for batch processes, long running
                                    processes that can restart.</li>
                                <li><b>4. Disk optimization:</b> Choose the right storage disk. Default is premium SSD's
                                    for performance. Use standard SSD to reduce cost and for operations that are not
                                    processor intensive.</li>
                                <li>Tip 1: Select the right size machine</li>
                                <li>Tip 2: Select Linux machine over windows machine</li>
                                <li>Tip 3: Check prices in nearby regions</li>
                            </ol>
                            <br />
                            <p><b>Availability in Azure:</b></p>
                            <ol>
                                <li>1. Fault domain: Group of physical hardware and a network switch. Similar to
                                    a RACK.</li>
                                <li>2. Update domain: Logical group of physical hardware that can undergo maintenance
                                    and be rebooted at the same time. Done by Azure.</li>
                                <li>3. Availability set (It's free): A collection of fault domains adn update domains.
                                    Can be upto 3
                                    fault domains and 20 update domains. All domains are in the same zone (datacenter).
                                </li>
                                <li>4. Availability zone (It's free): Physically separate zone within an Azure region.
                                    Techinically,
                                    a different building containing autonomous data center. Provides protection against
                                    a complete zone shutdown. Deploy load balancer, to route betweem the VM's.</li>
                            </ol>
                            <br />
                            <p><b>Virtual machine Scale Set (Free):</b></p>
                            <ol>
                                <li>A group of separate VMs sharing the same image</li>
                                <li>Managed as a group</li>
                                <li>Can be scaled out or in manually or according to conditions specified</li>
                                <li>Great for handling unpredictable loads</li>
                                <li>Note: To make changes to the Scale set the original image has to be modified.
                                    Changes could be lost when it's made to indiviual machines, when they are scaled in.
                                </li>
                                <li>For web apps, load balancer must be infront of the scale set.</li>
                            </ol>
                            <br />
                            <b>To enable scale in / scale out feature, one must register under Subscriptions -> Resource
                                providers -> Search for "microsoft.insights", select and click register.</b>
                            <br /><br />
                            <b>Command prompt: az provider show --namespace microsoft.insights -o table </b>

                            <br /><br />
                            <p><b>Steps to create a virtual machine scale set:</b></p>
                            <ul>
                                <li>1. Choose a subscription, resource group, give a virtual machine name, region,
                                    availability zone or set, image, size, default user....</li>
                                <li>2. Scaling: Scaling can be done manually or by using custom autoscale rules. Select
                                    the
                                    created Scale set, and on the menu bar, choose "Scaling"</li>
                                <li>3. To add a custom rule, choose "Add a rule" from Rules form field.</li>
                                <li>4. Scale out / scale in can be done based on several metrics.</li>
                                <li>5. Scale in algorithms: Default (1. Instance Id that's greatest, 2. newest instance,
                                    3. oldest vm...), </li>
                            </ul>
                            <br />
                            <p><b>Azure instance metadata services:</b></p>
                            <ol>
                                <li>1. This is a REST API service</li>
                                <li>2. Provides information about, SKU, storage, networking and scheduled events...</li>
                                <li>3. Accessible only from the VM</li>
                                <li>4. With scaleset, get notifications about upcoming evication, can be polled every
                                    minute.</li>
                            </ol>
                            <p><b>How to use Azure instance metadata services?</b></p>
                            <ul>
                                <li>1. Create a Virtual machine and select the VM and download the RDP file and
                                    connect...</li>
                                <li>2. Make a POST API request using postman, to the specific url, and Azure will
                                    respond with metadata about the current Virtual machine</li>
                            </ul>
                            <p class="p-4 m-4 rounded-lg bg-gray-200">Azure - App services</p>
                            <ul>
                                <li>1. A fully managed web hosting for websites</li>
                                <li>2. PUblish your code and it just runs</li>
                                <li>3. No access to the underlying servers</li>
                                <li>4. Secured and compliant, managed by Azure</li>
                                <li>5. Integrates with many source control and dev ops services like, Github, BitBucket,
                                    Azure DevOps, DockerHub and more...</li>
                                <li>6. Supported platforms, .NET, .NET Core, Node JS, Java, Python, PHP...</li>
                                <li>7. Also supports containers...</li>
                                <li>8. Supported application types: Web Apps, Web API's and web Jobs (batch
                                    processes)...</li>
                                <li>9. App service can be autoscaled to support spikes on loads</li>
                                <li>10. Extremely flexible, similar to VM Scale set...</li>
                                <li><b>The main difference between App Service and the Virtual machine is that, when VM
                                        is stopped, the pricing also stops. But for App Services, whent he service is
                                        stopped, doesn't mean the billing stops!!!</b></li>
                            </ul>
                            <br />
                            <p><b>Azure App Service - Create new:</b></p>
                            <ol>
                                <li>1. Search for, "App services", Click "Create new"</li>
                                <li>2. Select subscription, resource group, give a name (unique across Azure), choose
                                    (publish code / docker container), Runtime stack (PHP, .NET Core..), OS, Region,
                                    Windows Plan, SKU and Size</li>
                                <li>3. Click Review & Create</li>
                            </ol>
                            <p><u>There's possiblitity to edit files deployed to App service via, a Console and an App
                                    Serice Editor window...</u></p>

                            <br />
                            <p><b>Scale up:</b> Add more RAM, Processor and choose bigger and faster disks...</p>
                            <p><b>Scale out:</b> Add more parallel machines...</p>
                            <br />
                            <p class="p-4 m-4 rounded-lg bg-gray-200">Azure - AKS - Azure Kubernetes Services</p>
                            <ul>
                                <li>1. Managed Kubernetes on Azure</li>
                                <li>2. Allows deploying containers and managing them using Kubernetes on Azure</li>
                                <li>3. Paying only on the instances (VMs) used</li>
                            </ul>
                            <br />
                            <p><b>Containers:</b></p>
                            <ol>
                                <li>Thin packaging model/li>
                                <li>Packages software, it's dependencies, and configuration files</li>
                                <li>Can be copied between machines</li>
                                <li>Uses the underlying OS</li>
                            </ol>
                            <br />
                            <p><b>Containers Vs Virtual Machines:</b></p>
                            <ul>
                                <li>Containers are light weight as it's just a layer on top of the HOST OS and Virtual
                                    machines are heavy as it is a full OS</li>
                                <li>Containers can be started and stopped in seconds to minutes, whereas starting
                                    Virtual machines takes a minimum couple of minutes for the boot to complete and the
                                    application to start.</li>
                                <li>Containers can be restarted without restarting the hardware, but for Virtual
                                    machines some updates need harware restarts.</li>
                            </ul>
                            <img
                                src="https://www.netapp.com/media/Screen-Shot-2018-03-20-at-9.24.09-AM_tcm19-56643.png?v=85344">

                            <br />
                            <p><b>Problems with Containers:</b></p>
                            <ul>
                                <li>1. Deployment: There could be multiple containers that might need deployment. And,
                                    this can't be done manually.</li>
                                <li>2. Scalability: Scalability must be done Automatically as well</li>
                                <li>3. Monitoring: How to monitor too many containers?</li>
                                <li>4. Routing: How do you route traffic across the containers?</li>
                                <li>5. Availability: How to make the containers run with high availability?</li>
                            </ul>
                            <br />
                            <p><b>Deploying a container image to Azure:</b></p>
                            <ul>
                                <li>1. Once the docker container is ready, we need to create a new Container registry
                                </li>
                                <li>2. Choose a subscription, Give it a name, Choose a Tier (Basic, Standard, Premium),
                                    choose a resource group and location
                                </li>
                            </ul>
                            <b>To enable container deployment, one must register under Subscriptions -> Resource
                                providers -> Search for "microsoft.ContainerRegistry", select and click register.</b>
                            <br />
                            <p><b>Kubernetes:</b></p>
                            De facto standard for container management. Provides
                            <ul>
                                <li>1. Routing</li>
                                <li>2. Scalability</li>
                                <li>3. high availability</li>
                                <li>4. Automated deployment</li>
                                <li>5. configuration management and so on...</li>
                            </ul>
                            <p class="p-4 m-4 rounded-lg bg-gray-200">Azure - Azure functions</p>
                            <ul>
                                <li></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="p-8">
                    <div class="flex gap-8">
                        <div class="w-full font-italic p-8 rounded-lg text-center">
                            That's all folks!
                            <h6 class="p-2">This site is powered by <a href="https://tailwindcss.com/">Tailwind CSS</a>
                            </h6>
                            <h6 class="p-2">This site's icons are from <a href="https://ionic.io/ionicons">Ionic
                                    Icons</a></h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>

</html>